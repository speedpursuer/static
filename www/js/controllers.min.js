angular.module("app.controllers",[]).controller("RootCtrl",["$scope","$state","$timeout",function(a,e,d){function c(){e.go("tabsController.favorite").then(function(a){d(function(){e.go("tabsController.players").then(function(a){d(function(){e.go("tabsController.stars")})})})})}c();a.retry=function(){c()}}]).controller("StarsCtrl",["$scope","$ionicSlideBoxDelegate","$state","ErrorService","stars",function(a,e,d,c,g){a.stars=g.docs;e.update();e.slide(0);c.hideSplashScreen();a.showMoves=function(a,b){d.go("tabsController.moves",
{playerID:a,playerName:b})}}]).controller("ClipsCtrl",["$scope","$stateParams","$ionicListDelegate","DBService","NativeService",function(a,e,d,c,g){function f(b){c.updateFavorite(a.clips[b]._id,a.clips[b].local,!a.clips[b].favorite);a.clips[b].favorite=!a.clips[b].favorite}a.clips=c.list().getClipList();a.noMoreItemsAvailable=c.pagination().clips().hasNoMore();a.listCanSwipe=!0;a.playerName=e.playerName;a.moveName=e.moveName;a.playingClipIndex="";a.loadMore=function(){c.pagination().clips().more(function(){a.$broadcast("scroll.infiniteScrollComplete")})};
a.play=function(b){a.playingClipIndex=b;g.playAnimation(a.clips[b].image,a.clips[b].favorite,!0)};a.updateFavorite=function(a){d.closeOptionButtons();f(a)};a.updateFavoriteFromNative=function(){f(a.playingClipIndex)};a.updateThumbFromNative=function(b){"download"!==b&&a.clips[a.playingClipIndex].thumb||c.updateThumb(a.clips[a.playingClipIndex]._id,a.clips)};a.updateBothFromNative=function(b){"download"!==b&&a.clips[a.playingClipIndex].thumb?f(a.playingClipIndex):c.updateBoth(a.clips[a.playingClipIndex]._id,
!a.clips[a.playingClipIndex].favorite,a.clips)}}]).controller("FavorateCtrl",["$scope","$state","$ionicScrollDelegate","$ionicListDelegate","$ionicPopover","ErrorService","DBService","NativeService",function(a,e,d,c,g,f,b,h){a.listCanSwipe=!0;a.playingClipIndex="";a.clips=b.list().getFavoriteList();a.noMoreItemsAvailable=b.pagination().favorite().hasNoMore();a.data={players:b.list().getPlayerList(),moves:b.list().getMoveList()};a.search={selected_player:"",selected_move:"",by_player:"",by_move:""};
g.fromTemplateUrl("templates/popover.html",{scope:a}).then(function(b){a.popover=b});a.openPopover=function(b){a.search.by_player=a.search.selected_player;a.search.by_move=a.search.selected_move;a.popover.show(b)};a.filter=function(){f.showLoader();d.scrollTop();var c={player:a.search.by_player,move:a.search.by_move};a.search.selected_player=a.search.by_player;a.search.selected_move=a.search.by_move;b.pagination().favorite().search(c,function(){f.hideLoader()});a.popover.hide()};a.loadMore=function(){b.pagination().favorite().more(function(){a.$broadcast("scroll.infiniteScrollComplete")})};
a.play=function(b){a.playingClipIndex=b;h.playAnimation(a.clips[b].image,a.clips[b].favorite,!1)};a.removeFavorite=function(d){c.closeOptionButtons();b.updateFavorite(a.clips[d]._id,a.clips[d].local,!1);b.pagination().favorite().needLoad()&&a.loadMore()};a.updateThumbFromNative=function(c){"download"!==c&&a.clips[a.playingClipIndex].thumb||b.updateThumb(a.clips[a.playingClipIndex]._id,null)}}]).controller("PlayersCtrl",["$scope","$state","DBService",function(a,e,d){a.players=d.list().getPlayerList();
a.doRefresh=function(){d.remoteDB().syncRemote(function(){a.$broadcast("scroll.refreshComplete")})};a.showMoves=function(a,d){e.go("tabsController.tab2Moves",{playerID:a,playerName:d})}}]).controller("MovesCtrl",["$scope","$state","$stateParams","moves",function(a,e,d,c){a.moves=c;a.playerName=d.playerName;a.showClips=function(a,c){e.go("tabsController.clips",{playerID:d.playerID,moveName:a,moveID:c})}}]).controller("Tab2MovesCtrl",["$scope","$state","$stateParams","moves",function(a,e,d,c){a.moves=
c;a.playerName=d.playerName;a.showClips=function(a,c){e.go("tabsController.tab2Clips",{playerID:d.playerID,moveName:a,moveID:c})}}]);